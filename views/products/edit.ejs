<h1>Modifier le produit</h1>

<% if (locals.error) { %>
  <div class="alert alert-danger">
    <%= error %>
  </div>
<% } %>

<div class="card shadow-sm">
  <div class="card-body">
    <form action="/products/<%= product._id %>/update" method="POST">
      <div class="mb-3">
        <label for="name" class="form-label">Nom du produit</label>
        <input type="text" class="form-control" id="name" name="name" value="<%= product.name %>" required minlength="2">
        <div class="form-text">Le nom doit contenir au moins 2 caractères.</div>
      </div>
      
      <div class="row mb-3">
        <div class="col-md-6">
          <label for="price" class="form-label">Prix</label>
          <div class="input-group">
            <input type="number" class="form-control" id="price" name="price" value="<%= product.price %>" step="0.01" min="0" required>
            <span class="input-group-text">€</span>
          </div>
        </div>
        
        <div class="col-md-6">
          <label for="quantity" class="form-label">Quantité en stock</label>
          <input type="number" class="form-control" id="quantity" name="quantity" value="<%= product.quantity %>" min="0">
        </div>
      </div>
      
      <div class="mb-3">
        <label for="category" class="form-label">Catégorie</label>
        <select class="form-select" id="category" name="category">
          <% categories.forEach(category => { %>
            <option value="<%= category %>" <%= product.category === category ? 'selected' : '' %>><%= category %></option>
          <% }) %>
        </select>
      </div>
      
      <div class="mb-3">
        <label for="description" class="form-label">Description</label>
        <textarea class="form-control" id="description" name="description" rows="3"><%= product.description || '' %></textarea>
      </div>
      
      <div class="mb-3">
        <label for="tags" class="form-label">Tags (séparés par des virgules)</label>
        <input type="text" class="form-control" id="tags" name="tags" value="<%= Array.isArray(product.tags) ? product.tags.join(', ') : (product.tags || '') %>">
        <div class="form-text">Exemple: électronique, ordinateur, portable</div>
      </div>
      
      <div class="mb-3">
        <label for="imageUrl" class="form-label">URL de l'image</label>
        <input type="text" class="form-control" id="imageUrl" name="imageUrl" value="<%= product.imageUrl %>">
      </div>
      
      <div class="mb-3 form-check">
        <input type="checkbox" class="form-check-input" id="inStock" name="inStock" <%= product.inStock ? 'checked' : '' %>>
        <label class="form-check-label" for="inStock">En stock</label>
      </div>
      
      <div class="d-flex justify-content-between border-top pt-3">
        <a href="/products/<%= product._id %>" class="btn btn-secondary">Annuler</a>
        <button type="submit" class="btn btn-warning">Mettre à jour le produit</button>
      </div>
    </form>
  </div>
</div>
